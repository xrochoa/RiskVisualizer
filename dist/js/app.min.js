var app=angular.module("RiskVisualizer",["ui.bootstrap"]).controller("RiskVisualizerCtrl",["$scope",function(e){e.buttons=["Bar","Circles","People","Pie","Pixels"],e.buttonsDescription=["Percentage Bar","10 Circles","100 People","Pie Chart","10,000 Pixels in a Square"],e.zooms=[1,10,100,1e3,1e4,1e5],e.zoomsText=["No zoom","Zoom ten times","Zoom a hundred times","Zoom a thousand times","Zoom ten thousand times","Zoom a hundred thousand times"],e.zoomsEnabled=[!0,!1,!1,!1,!1,!1],e.divs=[0,1],e.numerators=[null,null],e.denominators=[null,null],e.result=[100,100],e.resultText=["Risk","Risk"],e.circles={},e.humans={},e.selectedIndex=0,e.clickSelect=function(t){e.selectedIndex=t},e.selectedZoom=0,e.clickZoom=function(t){e.selectedZoom=t},e.delGraph=function(){e.divs.length>2&&(e.divs.pop(),e.result.pop(),e.resultText.pop(),e.numerators.pop(),e.denominators.pop(),delete e.circles[e.divs.length],delete e.humans[e.divs.length])},e.addGraph=function(){e.divs.push(e.divs.length),e.result.push(100),e.resultText.push("Risk"),e.numerators.push(null),e.denominators.push(null),e.circles[e.divs.length-1]=e.returnLoopedArray(10,100),e.humans[e.divs.length-1]=e.returnLoopedArray(100,100)},e.compareGraph=function(){e.zoomsEnabled=[!0,!1,!1,!1,!1,!1];var t=[];for(i=0;i<e.divs.length;i++){var r=Math.round(e.numerators[i]/e.denominators[i]*100*1e6)/1e6;if(t.push(r),tempX=r*e.zooms[e.selectedZoom],null===e.denominators[i]||""===e.denominators[i]?(e.resultText[i]="Please enter values",e.result[i]=100):r>100?(e.resultText[i]="Population must be > Cases",e.result[i]=100):r>=0&&100>=r?(e.resultText[i]=r+"%",e.result[i]=tempX,e.circles[i]=e.returnLoopedArray(10,tempX/10),e.humans[i]=e.returnLoopedArray(100,tempX)):(e.resultText[i]="Please fix values",e.result[i]=100),i===e.divs.length-1){var a=Math.max.apply(null,t);10>=a&&(e.zoomsEnabled[1]=!0),1>=a&&(e.zoomsEnabled[2]=!0),.1>=a&&(e.zoomsEnabled[3]=!0),.01>=a&&(e.zoomsEnabled[4]=!0),.001>=a&&(e.zoomsEnabled[5]=!0)}}},e.returnLoopedArray=function(e,t){var r=[];for(j=0;j<e;j++)j<Math.round(t)?r[j]=!0:r[j]=!1;return r},e.circles[0]=e.returnLoopedArray(10,100),e.circles[1]=e.returnLoopedArray(10,100),e.humans[0]=e.returnLoopedArray(100,100),e.humans[1]=e.returnLoopedArray(100,100),e.footerDate=(new Date).getFullYear()}]).directive("canvaspie",function(){return{restrict:"E",transclude:!0,scope:{data:"="},replace:!0,link:function(e,t,r){e.$watch("data",function(){var r=t[0],a=r.getContext("2d");a.clearRect(0,0,r.width,r.height),a.clearRect(0,0,r.width,r.height);var o=r.width/2;a.beginPath(),a.arc(o,o,o,0,e.data/100*2*Math.PI),a.lineTo(o,o),a.fillStyle="#d9534f",a.fill(),a.beginPath(),a.arc(o,o,o,e.data/100*2*Math.PI,2*Math.PI),a.lineTo(o,o),a.fillStyle="#444444",a.fill()})},template:"<canvas class='canvas' width='75' height='75' ng-transclude></canvas>"}}).directive("canvasdots",function(){return{restrict:"E",transclude:!0,scope:{data:"="},replace:!0,link:function(e,t,r){e.$watch("data",function(){var r=t[0],a=r.getContext("2d");a.clearRect(0,0,r.width,r.height),a.beginPath(),a.strokeStyle="#d9534f";var o=e.data/100*1e4,n=Math.round(Math.sqrt(o));for(y=0;y<n;y++)for(x=0;x<n;x++)o>0&&(a.lineTo(x,y),o--);a.stroke()})},template:"<canvas class='canvas barholder' width='99' height='99' ng-transclude></canvas>"}});